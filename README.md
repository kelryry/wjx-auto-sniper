# 问卷星 AI 自动答题 / 抢单神器 (Gemini 模型版)

## 简介
这是一个基于 Tampermonkey（油猴）的问卷星辅助脚本。
**注意：这是一个大幅改版的脚本。**
与传统的“随机乱填”脚本不同，本脚本接入了 **Google Gemini** 大模型 API。它能根据你设定的“人设”阅读题目并生成符合逻辑的答案，非常适合需要**抢占时间点**、**快速提交**且**要求答案看起来像真人**的场景（例如讲座报名、抢课、有时效性的调查）。

**⚠️ 郑重声明 / 免责**
> **本脚本由编程爱好者修改，作者水平十分有限，代码可能存在 Bug、逻辑漏洞或不完善之处。**
> *   在复杂的网络环境或特殊的问卷题型下，脚本可能会失效。
> *   请务必先找无关紧要的问卷进行测试，确保配置正确后再用于正式场景。
> *   使用本脚本产生的任何后果（如提交失败、问卷无效等）请自行承担。

## 核心功能
1.  **AI 智能答题**：通过 Gemini API 理解题目，根据你配置的 `PERSONA`（人设）自动填写单选、多选和填空题，不再是无脑随机。
2.  **定时狙击（抢答）**：支持设置 `START_TIME`，脚本会在开放时间前毫秒级自动刷新并开始答题。
3.  **智能导航**：
    *   AI 填完后，自动跳转到无法处理的复杂题型（如地图、上传），并高亮提示。
    *   如果全填完了，自动跳转到提交区。
    *   **全程无弹窗**，追求极致速度。
4.  **混合模式**：简单题交给 AI，复杂矩阵/排序题保留了随机填写或跳过的逻辑，防止脚本卡死。

## 安装指南

### 1. 环境准备
你需要安装 **Tampermonkey** 插件：
*   Chrome/Edge 用户请去扩展商店搜索 Tampermonkey。
*   Firefox 用户请去 Add-ons 搜索 Tampermonkey。

### 2. 安装脚本
新建脚本，将代码完整复制粘贴进去并保存。

### 3. 获取 API Key (关键步骤)
本脚本依赖 Google Gemini API（目前免费且速度极快）。
1.  确保你的网络环境可以访问 Google。
2.  访问 [Google AI Studio](https://aistudio.google.com/app/apikey)。
3.  点击 **Get API key**，复制生成的 Key。

## 配置说明 (User Config)
脚本开头有一个 `USER_CONFIG` 区域，这是你唯一需要修改的地方：

```javascript
const USER_CONFIG = {
    // 1. 在这里填入你申请的 API Key
    GEMINI_API_KEY: "AIzaSyDaxxxxxxxxxxxxxxxxxxx",

    // 2. 模型选择
    // "gemini-flash-lite-latest": 速度最快，适合拼手速
    // "gemini-2.5-flash": 更加智能，适合题目稍难的问卷
    MODEL_NAME: "gemini-flash-lite-latest",

    // 3. 定义你的人设 (AI 会扮演这个角色去答题)
    // 描述越详细，填空题写得越像真人
    PERSONA: `
        我是一名22岁的男性大四学生，主修计算机科学。
        生活费每月2000元，主要来源于父母支持。
        平时喜欢打游戏、看科技新闻。
        性格比较直率，对未来充满希望但也有就业焦虑。
    `,

    // 4. 抢答开始时间 (格式：YYYY-MM-DD HH:mm:ss)
    // 脚本会一直显示倒计时遮罩，直到时间到了自动刷新开始
    START_TIME: "2025-12-01 10:00:00",

    // 5. 刷新提前量 (秒)
    // 建议设置 0.3 - 0.5 秒，防止网络延迟导致刷新晚了
    PRE_LOAD_OFFSET: 0.3,

    // 6. 是否自动点击提交
    // false (推荐): 填完后跳转到提交按钮，由人工点击（更稳妥，防止验证码干扰）
    // true: 填完直接提交（适合纯挂机，但遇到验证码可能卡住）
    AUTO_SUBMIT: false
};
```

## 使用流程
1.  **配置**：填好 API Key 和 `START_TIME`。
2.  **等待**：打开问卷页面，如果没到时间，屏幕会变黑显示倒计时。
3.  **自动执行**：
    *   时间一到，页面自动刷新。
    *   AI 开始高速填写（每 20 题一组）。
    *   简单的单选/多选/填空会被瞬间填完。
4.  **人工介入**：
    *   脚本会自动滚动到 **第一个未填写的题目**（通常是 AI 处理不了的复杂图表题），并画红框提示。
    *   你手动填完剩下的题。
    *   如果没有未填题目，页面会直接停在**提交按钮**处，你点击提交即可。

## 常见问题
*   **Q: 为什么没反应？**
    *   A: 请按 F12 打开控制台 (Console)，看是否有红色报错。通常是因为网络无法连接 Google API，或者 Key 填错了。
*   **Q: 填空题胡说八道怎么办？**
    *   A: 请修改配置里的 `PERSONA`，把人设写得更具体一点，或者将模型改为 `gemini-2.5-flash`。
*   **Q: 遇到滑块验证码怎么办？**
    *   A: 脚本无法破解验证码。建议 `AUTO_SUBMIT` 设为 `false`，最后一步由你亲自点击提交并手动滑过验证码。

## 进阶：IP 限制破解 (保留功能)
如果你是在刷量（而不是抢单），遇到问卷星的 IP 限制，可以配合 Chrome 插件 **Modify Headers** 使用。
*   下载插件：[Modify Headers for Google](https://chrome.google.com/webstore/detail/modify-headers-for-google/innpjfdalfhpcoinfnehdnbkglpmogdi)
*   导入配置：使用项目里的 `modifyheaders.json` 伪造 IP 头。
*   注意：这只对普通刷量有效，对于强校验的报名类问卷无效。

## 鸣谢
感谢原作者提供的思路，以及 Google Gemini 提供的强大 API 能力。

原作者链接🔗https://github.com/ZainCheung/wenjuanxin

再次强调：**代码简陋，谨慎使用。**
