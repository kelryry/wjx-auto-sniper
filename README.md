# 🚀 问卷星 AI 自动答题 / 抢单神器

## 📖 简介
这是一个基于 **Tampermonkey（油猴）** 的问卷星辅助脚本。

**🔥 注意：这是一个改动较大的重构版本。**

与传统的“随机乱填”脚本不同，本脚本接入了 **Google Gemini** 大模型 API。它能根据你设定的“人设”阅读题目并生成符合逻辑的答案。
非常适合需要**抢占时间点**、**快速提交**且**要求答案看起来像真人**的场景（例如讲座报名、热门抢课、有时效性的调查）。

---

## ⚠️ 郑重声明 / 免责
> **本脚本由编程爱好者修改，作者水平十分有限，代码很可能存在 Bug、逻辑漏洞或不完善之处。**
> *   🧪 **请务必测试**：在正式抢单前，请找无关紧要的问卷进行多次测试，确保配置正确。
> *   🌐 **网络环境**：脚本依赖 Google API，请确保你的网络畅通。
> *   🚫 **后果自负**：使用本脚本产生的任何后果（如提交失败、问卷无效、账号异常等）请自行承担。

---

## ✨ 核心功能 (Features)

1.  **🤖 AI 智能大脑**
    *   不再是无脑随机！通过 **Gemini API** 理解题目。
    *   根据你配置的 `PERSONA`（人设）自动填写单选、多选和简答题，内容逻辑通顺，像真人一样回答。

2.  **📱 多端适配 (NEW!)**
    *   支持 **PC 端 (`jq`)** 和 **移动端 (`vm`/`m`)** 布局。
    *   自动识别页面结构，无论是电脑网页还是手机分享链接，都能定位。

3.  **🔢 强力填充技术 (NEW!)**
    *   针对问卷星移动端的格式校验（如手机号等），内置 `Native Value Setter` 原型链模拟技术。
    *   突破 React/Vue 等框架的输入限制，**完美填入手机号**。

4.  **🛡️ 协议秒签 (NEW!)**
    *   针对移动端问卷提交前的“我已阅读并同意隐私协议”选择框，脚本会自动检测并**强制勾选**。
    *   即使有题目未填完，也会优先处理协议框，为你节省宝贵的 1 秒钟。

5.  **⏰ 定时狙击（抢答）**
    *   支持设置 `START_TIME`与`PRE_LOAD_OFFSET`，脚本会显示倒计时遮罩，并根据设置提前刷新，抵消网络延迟。
    *   时间一到，将自动刷新并开始答题，专为抢单设计。

6.  **🧭 智能导航与高亮**
    *   **混合模式**：简单题交给 AI，复杂题型（如文件上传）自动跳过。
    *   **漏题定位**：AI 填完后，脚本会自动滚动到**第一道未填写的题目**，并用🔴**红色高亮**框出，提醒你人工补全。
    *   **自动就位**：如果所有题目都填完了，页面会自动滚动到**提交按钮**处，等待你点击（或自动提交）。

---

## 🛠️ 安装指南

### 1. 环境准备
你需要安装 **Tampermonkey** 插件：
*   🧩 Chrome/Edge 用户请去扩展商店搜索 Tampermonkey。
*   🦊 Firefox 用户请去 Add-ons 搜索 Tampermonkey。

### 2. 安装脚本
新建脚本，将代码完整复制粘贴进去并保存。

### 3. 获取 API Key (必做步骤)
本脚本依赖 Google Gemini API（目前免费且速度极快）。
1.  确保你的网络环境可以访问 Google。
2.  🔗 访问 [Google AI Studio](https://aistudio.google.com/app/apikey)。
3.  点击 **Get API key**，复制生成的 Key。

---

## ⚙️ 配置说明 (User Config)
脚本开头有一个 `USER_CONFIG` 区域，这是你必须需要修改的地方：

```javascript
const USER_CONFIG = {
    // 1. 🔑 在这里填入你申请的 API Key (必填)
    GEMINI_API_KEY: "AIzaSyDaxxxxxxxxxxxxxxxxxxx",

    // 2. ⚡ 模型选择
    // "gemini-flash-lite-latest": 速度最快，适合拼手速 (推荐)
    // "gemini-flash-latest": 更加智能，适合题目稍难的问卷
    MODEL_NAME: "gemini-flash-lite-latest",

    // 3. 🎭 定义你的人设 (AI 会扮演这个角色去答题)
    // 描述越详细，填空题写得越像真人。
    // 重要：如果问卷包含电话/姓名，请在这里写明，AI 会提取填入。
    PERSONA: `
        姓名：张三
        电话：13800138000
        身份：22岁大四学生，计算机科学专业。
        性格：积极向上，对未来充满期待。
        情况：如果遇到未提及的问题，请进行合理的正面推断。
    `,

    // 4. ⏱️ 抢答开始时间 (格式：YYYY-MM-DD HH:mm:ss)
    // 脚本会一直显示倒计时遮罩，直到时间到了自动刷新开始
    START_TIME: "2025-12-01 10:00:00",

    // 5. 🚀 刷新提前量 (秒)
    // 建议设置 0.3 - 0.5 秒，抵消网络延迟，确保准点进入
    PRE_LOAD_OFFSET: 0.3,

    // 6. 👆 是否自动点击提交
    // false (推荐): 填完后滚动到提交按钮，由人工点击（更稳妥，利用人工点击时间避开风控）。
    // true: 填完倒计时 1 秒后自动提交（适合纯挂机，但遇到滑块验证码可能卡住）。
    AUTO_SUBMIT: false
};
```

---

## 🎮 使用流程

1.  **配置**：填好 API Key、人设信息和 `START_TIME`。
2.  **等待**：打开问卷页面，如果没到时间，屏幕会显示灰色倒计时遮罩。
3.  **自动执行**：
    *   时间一到，页面自动刷新。
    *   AI 开始高速填写（每 15-20 题一组）。
    *   脚本同时会在后台自动勾选“隐私协议”。
4.  **人工介入 (关键)**：
    *   **如果有漏题**：脚本会自动滚动到**红色高亮**的题目处（通常是 AI 处理不了的复杂图表题），请手动补全。
    *   **如果全填完**：页面直接停在**提交按钮**正中央。
    *   你只需确认无误，点击提交即可。

---

## ❓ 常见问题 (Q&A)

*   **Q: 为什么没反应？**
    *   A: 请按 `F12` 打开控制台 (Console)，看是否有红色报错。通常是因为网络无法连接 Google API，或者 Key 填错了。
*   **Q: 填空题胡说八道怎么办？**
    *   A: 请修改配置里的 `PERSONA`，把人设写得更具体一点（比如指定具体的年级、专业、居住地），或者将模型改为 `gemini-2.5-flash`。
*   **Q: 遇到滑块验证码怎么办？**
    *   A: 脚本无法破解验证码。建议将 `AUTO_SUBMIT` 设为 `false`，最后一步由你亲自点击提交，如果弹出滑块，手动划一下即可。

---

## 🤝 鸣谢与版权 (Acknowledgement)

本脚本基于 **ZainCheung** 的开源项目进行二次开发与 AI 适配。

*   **原作者**: ZainCheung
*   **原项目链接**: [https://github.com/ZainCheung/wenjuanxin](https://github.com/ZainCheung/wenjuanxin)
*   **开源协议**: 本衍生作品遵循 **GPL-3.0** 协议开源。

感谢 Google Gemini 提供的强大 API 能力。
```

## ❤️以此致谢

每一行代码都凝聚了心血。
如果这个仓库对您有启发或帮助，请不吝赐予一个 **Star 🌟**。
这看似微小的举动，对开发者来说却是巨大的鼓励！💪

If this project helps you, please give a ⭐️!
